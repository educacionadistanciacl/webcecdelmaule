---
// CursosContainer.astro
import CursoCard from './CursoCard.astro';
import Btn from './Btn.astro';
import {slugReplace} from '../func/slugURL';
import { prepararCursos } from '../func/prepararCursos';

type TipoCursoKey = 'Sincrónico' | 'Asincrónico' | 'Presencial' | 'Todos';

const tipoCursoColores = {
    Sincrónico: "#FFD700", // color dorado
    Asincrónico: "#FF4500", // color rojo anaranjado
    Presencial: "#DB1A5D", // color azul violeta
    Todos: "#643090" // color púrpura
};


const datosCursos = Astro.props.cursos;

const cursos = prepararCursos(datosCursos).cursos;

// Función para extraer y ajustar el tipo de curso para coincidir con las claves en tipoCursoColores
function ajustarTipoCurso(tipoCurso: string): string {
    const tipo = tipoCurso.replace('Curso ', '') as TipoCursoKey;
    return tipoCursoColores[tipo] ?? '#FFFFFF'; // Utiliza el operador Nullish coalescing para manejar claves no definidas
}
---
<div class="cursos-container">
    <div class="buttons-container">
        {Object.entries(tipoCursoColores).map(([tipo, color]) => (
            <Btn 
                text={tipo.toUpperCase()} 
                backgroundColor={color}
                fontSize="20px"`} 
            />
        ))}
    </div>
    <div class="card-container">
        {cursos.map(curso => (
            <CursoCard
                nombreCurso={curso.NOMBRE}
                tipoCurso={curso.TIPO}
                link={`/cursos/${slugReplace(curso.NOMBRE)}`}
                backgroundColor={ajustarTipoCurso(curso.TIPO)}
            />
        ))}
    </div>
</div>

<style>
    .cursos-container {
        background-color: #062C5B;
        padding: 40px;
        padding-top: 5%;
    }
    
    .buttons-container {
        display: flex;
        justify-content: center;
        gap: 2%;
        margin-bottom: 4%;
    }
    
    .card-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        padding-bottom: 5%;
        box-shadow: 0px 20px 0 0 #D99F3F; /* Simula un borde inferior usando box-shadow */
    }

    @media (max-width: 800px) {
    .buttons-container {
      display: none;
    }
  }
    </style>