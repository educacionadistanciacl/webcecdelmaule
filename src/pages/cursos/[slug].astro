---
// ---------------------------------------------------------------------
// Un slug es una versión simplificada y legible de un nombre o título, 
// utilizado comúnmente en URLs para mejorar 
// la legibilidad y el SEO (optimización para motores de búsqueda).
// EJEMPLO 
// un artículo titulado "Cómo Optimizar Tu Sitio Web", el slug correspondiente sería como-optimizar-tu-sitio-web.
// --------------------------------------------------------------------


// Importa los datos de los cursos
import cursos from '../../data/cursos.json';
import BaseLayout from '../../layouts/BaseLayout.astro';
import CursoTemplate from '../../components/CursoTemplate.astro';

export async function getStaticPaths() {
  return cursos.map(curso => {
    const slug = curso.NOMBRE
    .replace(/[^a-zA-Z0-9]+/g, '-')  // Reemplaza cualquier carácter no alfanumérico por guiones
    .replace(/-+/g, '-')             // Reemplaza múltiples guiones consecutivos por un solo guion
  .toLowerCase();           // Convierte a minúsculasminúsculas
    return {
      params: {
        slug
      },
      props: {
        curso
      }
    };
  });
}

// Accede a los props pasados por getStaticPaths
const { slug } = Astro.params;
const curso = cursos.find(c => 
  c.NOMBRE
  .replace(/[^a-zA-Z0-9]+/g, '-')  // Reemplaza cualquier carácter no alfanumérico por guiones
  .replace(/-+/g, '-')             // Reemplaza múltiples guiones consecutivos por un solo guion
    .toLowerCase() === slug   // Compara con el slug generado
);


if (!curso) {
  return Astro.redirect('/404');
}
---
<!-- aqui aplicar componente de cursoTemplate -->

<BaseLayout title={curso.NOMBRE}>
  <CursoTemplate curso={curso} />
</BaseLayout>