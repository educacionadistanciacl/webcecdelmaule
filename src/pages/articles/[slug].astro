---
import { getCollection } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles.map((article) => ({
    params: { slug: article.slug },
  }));
}

const { slug } = Astro.params;
const article = await getCollection('articles').then((articles) => 
  articles.find((article) => article.slug === slug)
);

if (!article) {
  throw new Error(`Art√≠culo no encontrado: ${slug}`);
}
---

<ArticleLayout title={article.data.title} date={article.data.date} author={article.data.author}>
  {article.content}
</ArticleLayout>
